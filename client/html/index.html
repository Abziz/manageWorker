<html>
<head>
  <title>Scanner Shop</title>
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
  <!-- <link rel="stylesheet" href="style.css" />
   -->
   <link rel="stylesheet" type="text/css" href="../css/login.css">

</head>
<body>
  <div id="login_div" class="main-div">
    <label for="loginbox"><h1><u>Welcome! Please Login:</u></h1></label>
    <label for="uname"><b>Username</b></label>
    <input type="text" id="email_field" placeholder="Enter Username" name="uname" required>

    <label for="psw"><b>Password</b></label>
    <input type="password" id="password_field" placeholder="Enter Password" name="psw" required>

    <button onclick="login()">Login</button>
    <label>
        <input type="checkbox" checked="checked" name="remember"> Remember me
    </label>
    <a href="forgotPass"><span class="psw" style="float: right;">Forgot password?</span></a>
    <br>
    <form id="workerForm" action="add-worker" method="POST">
      <input type="text" name="email" placeholder="email">
      <input type="password" name='password' placeholder="password">
      <input type="password" name='passwordConfirm' placeholder="password confirm">
      <button type="submit"> add worker</button>
    </form>
</div>
<!--
<div id="user_div" class="loggedin-div">
  <h3>Welcome User</h3>
  <p id="user_para">Welcome to Scanner Shop! You're currently logged in.</p>
  <a href="worker">Account details</span></a>
  <button onclick="logout()">Logout</button>
  <a href="signup"><button>sign up new user</button> </a>
</div>
-->


  <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
  
  <script>
    // Initialize Firebase
    let firebaseConfig = {
      apiKey: "AIzaSyDPHPnY-OEUMQ_79r2eFmrSOPN5Ajc-7K0",
      authDomain: "sacnnershop.firebaseapp.com",
      databaseURL: "https://sacnnershop.firebaseio.com",
      projectId: "sacnnershop",
      storageBucket: "sacnnershop.appspot.com",
      messagingSenderId: "743639413044",
      appId: "1:743639413044:web:f7010c06eb14558a79b561",
      measurementId: "G-0DCJTMZR0J"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
  <script src="auth.js"></script>
  <script type="text/javascript" defer>
    const form = document.getElementById('workerForm');
    form.addEventListener('submit',async (ev)=>{
      ev.preventDefault();
      const email = document.querySelector('input[name="email"]').value;
      const password = document.querySelector('input[name="password"]').value;
      const passwordConfirm = document.querySelector('input[name="passwordConfirm"]').value;
      const body = { email,password,passwordConfirm};
      try {
        const res = await fetch('/add-worker',{
          method:'POST',
          headers:{
            'Content-Type':'application/json'
          },
        body:JSON.stringify(body)}).then(res => res.json());
        console.log(res,'success');
      }catch(err){
        console.error(err);
      }
    });
  </script>
</body>
</html>
